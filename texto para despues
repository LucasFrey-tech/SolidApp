 
 /**
   * Obtiene todas las Campañas paginadas activas, incluyendo imagenes.
   *
   * @param {number} page - Página solicitada
   * @param {number} limit - Cantidad de Campañas por página
   * @param {string} search - Término de busqueda
   * @param {string} rol - Rol del Usuario
   * @returns Lista de Campañas paginadas
   */
 /* campaign.service.ts

 async findPaginated(
    page: number,
    limit: number,
    search: string,
    rol: string,
  ) {
    const startIndex = (page - 1) * limit;

    const query = this.campaignsRepository
      .createQueryBuilder('campaign')
      .leftJoinAndSelect('campaign.organizacion', 'organizacion')
      .leftJoinAndSelect(
        'campaign.imagenes',
        'imagen',
        'imagen.esPortada = :isPortada',
        { isPortada: true },
      );

    if (rol !== 'admin') {
      query.where('campaign.estado = :estado', {
        estado: CampaignEstado.ACTIVA,
      });
    } else {
      query.where('campaign.estado IN (:...estados)', {
        estados: [
          CampaignEstado.PENDIENTE,
          CampaignEstado.ACTIVA,
          CampaignEstado.RECHAZADA,
        ],
      });
    }

    query
      .andWhere(
        '(campaign.titulo LIKE :search OR campaign.descripcion LIKE :search)',
        { search: `%${search}%` },
      )
      .orderBy('campaign.id', 'ASC')
      .skip(startIndex)
      .take(limit);

    const [campaigns, total] = await query.getManyAndCount();

    return {
      items: campaigns.map(this.mapToResponseDto),
      total,
    };
  }
  */

  /* CAMPAIGN.COMTROLLER.TS

    @Get('/list/paginated/')
  @ApiOperation({ summary: 'Listar campañas solidarias de la organizacion' })
  @ApiResponse({
    status: 200,
    type: ResponseCampaignsDto,
    isArray: true,
  })
  findPaginated(
    @Query('page') page = 1,
    @Query('limit') limit = 10,
    @Query('search') search = '',
    @Req() req: Request,
  ) {
    const rol = (req as any).user?.rol ?? 'user';

    return this.campaignService.findPaginated(
      Number(page),
      Number(limit),
      search,
      rol,
    );
  }
*/

/* frontend\src\app\campaign-catalogo\page.tsx

"use client";

import { useEffect, useState } from "react";
import Link from "next/link";
import Image from "next/image";
import styles from "@/styles/Donar/donar.module.css";
import { Campaign } from "@/API/types/campañas/campaigns";
import { baseApi } from "@/API/baseApi";
import { CampaignEstado } from "@/API/types/campañas/enum";

const ITEMS_PER_PAGE = 6;

export default function CampaignsCatalogoPage() {
  const [campaigns, setCampaigns] = useState<Campaign[]>([]);
  const [filteredCampaigns, setFilteredCampaigns] = useState<Campaign[]>([]);
  const [currentPage, setCurrentPage] = useState(1);
  const [total, setTotal] = useState(0);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [search, setSearch] = useState("");

  useEffect(() => {
    const fetchData = async () => {
      try {
        setLoading(true);

        const res = await baseApi.campaign.getAllPaginated(
          currentPage,
          ITEMS_PER_PAGE
        );

        setCampaigns(res.items);
        setTotal(res.total);
      } catch (err) {
        console.error(err);
        setError("Error al cargar campañas");
      } finally {
        setLoading(false);
      }
    };

    fetchData();
  }, [currentPage]);

  useEffect(() => {
    if (!search.trim()) {
      setFilteredCampaigns(campaigns);
      return;
    }

    const s = search.toLowerCase();

    const filtered = campaigns.filter(
      (c) =>
        c.titulo.toLowerCase().includes(s) ||
        c.descripcion.toLowerCase().includes(s) ||
        c.organizacion.nombreFantasia.toLowerCase().includes(s)
    );

    setFilteredCampaigns(filtered);
  }, [search, campaigns]);

  const totalPages = Math.ceil(total / ITEMS_PER_PAGE);

  if (loading) {
    return (
      <main className={styles.page}>
        <p className={styles.loading}>Cargando campañas...</p>
      </main>
    );
  }

  if (error) {
    return (
      <main className={styles.page}>
        <div className={styles.noResults}>{error}</div>
      </main>
    );
  }

  return (
    <main className={styles.page}>
      <section className={styles.container}>
        <header className={styles.header}>
          <h1 className={styles.title}>Donaciones</h1>
          <p className={styles.subtitle}>
            Elegí una campaña y colaborá con una causa
          </p>

          <div className={styles.searchContainer}>
            <input
              type="text"
              value={search}
              onChange={(e) => {
                setSearch(e.target.value);
                setCurrentPage(1);
              }}
              placeholder="Buscar campaña..."
              className={styles.searchInput}
            />
          </div>
        </header>

        <div className={styles.grid}>
          {filteredCampaigns.length === 0 ? (
            <div className={styles.noResults}>
              No hay campañas disponibles
            </div>
          ) : (
            filteredCampaigns.map((campaign) => (
              <article key={campaign.id} className={styles.card}>
                {campaign.imagenPortada && (
                  <div className={styles.imageWrapper}>
                    <Image
                      src={campaign.imagenPortada}
                      alt={campaign.titulo}
                      fill
                      className={styles.image}
                    />
                  </div>
                )}

                <div className={styles.cardContent}>
                  <h2 className={styles.cardTitle}>
                    {campaign.titulo}
                  </h2>

                  <p className={styles.description}>
                    {campaign.descripcion}
                  </p>

                  <div className={styles.meta}>
                    Objetivo: {campaign.objetivo}
                  </div>
                </div>

                <Link
                  href={`/campaign-catalogo/${campaign.id}`}
                  className={styles.button}
                >
                  Ver más información
                </Link>
              </article>
            ))
          )}
        </div>

        
          <div className={styles.pagination}>
            <button
              onClick={() => setCurrentPage((p) => p - 1)}
              disabled={currentPage === 1}
              className={styles.pageButton}
            >
              ← Anterior
            </button>

            <span className={styles.pageInfo}>
              Página {currentPage} de {totalPages}
            </span>

            <button
              onClick={() => setCurrentPage((p) => p + 1)}
              disabled={currentPage === totalPages}
              className={styles.pageButton}
            >
              Siguiente →
            </button>
          </div>
        
      </section>
    </main>
  );
}
  */